<include src=".include/head.py.html" />

<body>
    <include src=".include/page_top.html" />

    <site>
        <include src=".include/page_navigation.py.html" />
        <include src=".include/content_db.html" />

        <g>
            <!-- Featured Projects -->
            <middle content-title="featured." id="featured">
                <slide-view>
                    <!-- Generated Slides -->
                    <code py>
                        slides = get_vars_listing('featured')
                        
                        i = 0
                        for slide_info in slides:
                            slide_info['index'] = i
                            i += 1
                            include_template('.include/content_slide.html', slide_info)
                    </code>

                    <!-- Generated Thumbnails -->
                    <thumb-list>
                        <code py>
                            for slide_info in slides:
                                include_template('.include/content_slide_thumb.html', slide_info)
                        </code>
                    </thumb-list>
                </slide-view>
            </middle>

            <!-- Project Grid -->
            <middle content-title="projects." id="projects">
                <g>
                    <code py>
                        projects = get_vars_listing('projects')
                        max_projects_per_row = 3
                        row_count = 0

                        projects_left = len(projects)
                        row_items = []
                        for project_info in projects:
                            projects_left -= 1
                            row_items.append(project_info)
                            
                            if projects_left == 0 or (projects_left % max_projects_per_row == 0):
                                row_content = ''
                                for item in row_items:
                                    item['row_index'] = row_count
                                    row_content += template('.include/content_tile.html', item)
                                print_element('grid-row', content=row_content)
                                
                                row_count += 1
                                row_items = []
                    </code>
                </g>
            </middle>

            <!-- About Me -->
            <middle content-title="me." id="me">
                <g class="flex m-column">
                    <g class="content">
                        I am an independent game and software developer based in Bloomington, Indiana.
                        In addition to checking out my projects here, you can find me on Twitter
                        <a href="http://twitter.com/rajinshankar" target="_blank">@RajinShankar</a> to see whatever I'm
                        up to at the moment.
                    </g>
                    <panel class="round stretch keep-square"
                        style="background-image:url('img/rajin.png'); width: 200px;"></panel>
                </g>
            </middle>
        </g>

        <include src=".include/page_bottom.html" />
    </site>
</body>

<code py>
    # Generate content pages
    for project_info in get_vars_listing('projects'):
        generate_file_from_template(".include/project_page_template.py.html", f"{project_info['get_link']}.py.html", project_info)
    
    for blog_info in get_vars_listing('blog'):
        generate_file_from_template(".include/blog_page_template.py.html", f"{blog_info['get_link']}.py.html", blog_info)
</code>